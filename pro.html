<!DOCTYPE html>
<html lang="km">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ“ AI English Learning Pro - ášáŸ€á“á‡á¶á˜á½á™ Claude AI</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700;900&family=Kantumruy+Pro:wght@300;400;600;700&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #667eea;
            --secondary: #764ba2;
            --success: #10b981;
            --danger: #ef4444;
            --warning: #f59e0b;
            --info: #3b82f6;
            --dark: #1f2937;
            --light: #f9fafb;
            --purple: #8b5cf6;
            --pink: #ec4899;
        }

        body {
            font-family: 'Poppins', 'Kantumruy Pro', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
            min-height: 100vh;
            padding: 15px;
            overflow-x: hidden;
        }

        .container {
            max-width: 1600px;
            margin: 0 auto;
            background: white;
            border-radius: 30px;
            box-shadow: 0 30px 100px rgba(0,0,0,0.4);
            overflow: hidden;
            animation: fadeInUp 0.6s ease;
        }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .header {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 50%, var(--purple) 100%);
            color: white;
            padding: 40px 30px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 120"><path d="M321.39,56.44c58-10.79,114.16-30.13,172-41.86,82.39-16.72,168.19-17.73,250.45-.39C823.78,31,906.67,72,985.66,92.83c70.05,18.48,146.53,26.09,214.34,3V0H0V27.35A600.21,600.21,0,0,0,321.39,56.44Z" fill="rgba(255,255,255,0.1)"></path></svg>') no-repeat bottom;
            background-size: cover;
            opacity: 0.5;
        }

        .header-content {
            position: relative;
            z-index: 1;
        }

        .header h1 {
            font-size: 3.5em;
            margin-bottom: 15px;
            font-weight: 900;
            text-shadow: 3px 3px 6px rgba(0,0,0,0.3);
            animation: glow 2s ease-in-out infinite;
        }

        @keyframes glow {
            0%, 100% { text-shadow: 3px 3px 6px rgba(0,0,0,0.3), 0 0 20px rgba(255,255,255,0.3); }
            50% { text-shadow: 3px 3px 6px rgba(0,0,0,0.3), 0 0 40px rgba(255,255,255,0.5); }
        }

        .header p {
            font-size: 1.3em;
            opacity: 0.95;
            font-weight: 400;
        }

        .badge {
            display: inline-block;
            background: rgba(255,255,255,0.2);
            padding: 8px 16px;
            border-radius: 20px;
            margin-top: 15px;
            font-size: 0.9em;
            font-weight: 600;
        }

        .main-layout {
            display: grid;
            grid-template-columns: 1fr 450px;
            gap: 0;
            min-height: 750px;
        }

        @media (max-width: 1200px) {
            .main-layout {
                grid-template-columns: 1fr;
            }
            .sidebar {
                border-left: none !important;
                border-top: 3px solid #e5e7eb;
            }
        }

        .chat-area {
            display: flex;
            flex-direction: column;
            padding: 30px;
            background: linear-gradient(to bottom, #fafafa 0%, #f3f4f6 100%);
        }

        .chat-header {
            background: white;
            padding: 25px;
            border-radius: 20px;
            margin-bottom: 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
        }

        .language-switch {
            display: flex;
            gap: 12px;
            justify-content: center;
            margin-bottom: 20px;
        }

        .lang-btn {
            padding: 14px 28px;
            border: 2px solid var(--primary);
            background: white;
            color: var(--primary);
            border-radius: 30px;
            cursor: pointer;
            font-weight: 700;
            transition: all 0.3s ease;
            font-size: 1em;
        }

        .lang-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
        }

        .lang-btn.active {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            border-color: transparent;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.5);
        }

        .status-bar {
            padding: 16px;
            border-radius: 15px;
            text-align: center;
            font-weight: 700;
            display: none;
            animation: slideDown 0.4s ease;
            font-size: 1.05em;
        }

        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-15px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .status-bar.listening {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
            display: block;
            animation: pulse 1.5s infinite;
        }

        .status-bar.speaking {
            background: linear-gradient(135deg, #3b82f6, #2563eb);
            color: white;
            display: block;
            animation: pulse 1.5s infinite;
        }

        .status-bar.processing {
            background: linear-gradient(135deg, #f59e0b, #d97706);
            color: white;
            display: block;
            animation: pulse 1.5s infinite;
        }

        .status-bar.connected {
            background: linear-gradient(135deg, #8b5cf6, #7c3aed);
            color: white;
            display: block;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.85; transform: scale(0.97); }
        }

        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 25px;
            background: white;
            border-radius: 20px;
            margin-bottom: 20px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
            scroll-behavior: smooth;
        }

        .chat-messages::-webkit-scrollbar {
            width: 10px;
        }

        .chat-messages::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }

        .chat-messages::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border-radius: 10px;
        }

        .message {
            margin-bottom: 25px;
            animation: messageSlide 0.5s ease;
            max-width: 85%;
        }

        @keyframes messageSlide {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .message.user {
            margin-left: auto;
            text-align: right;
        }

        .message.ai {
            margin-right: auto;
        }

        .message-bubble {
            display: inline-block;
            padding: 18px 24px;
            border-radius: 25px;
            position: relative;
            box-shadow: 0 3px 15px rgba(0,0,0,0.12);
        }

        .message.user .message-bubble {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            border-bottom-right-radius: 8px;
        }

        .message.ai .message-bubble {
            background: linear-gradient(135deg, #f3f4f6, #e5e7eb);
            color: var(--dark);
            border-bottom-left-radius: 8px;
        }

        .message-header {
            font-size: 0.9em;
            opacity: 0.9;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .message-content {
            line-height: 1.7;
            font-size: 1.05em;
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        .message-time {
            font-size: 0.8em;
            opacity: 0.65;
            margin-top: 8px;
        }

        .input-section {
            background: white;
            padding: 25px;
            border-radius: 20px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
        }

        .input-wrapper {
            display: flex;
            gap: 12px;
            margin-bottom: 15px;
        }

        .input-wrapper textarea {
            flex: 1;
            padding: 18px 24px;
            border: 3px solid #e5e7eb;
            border-radius: 20px;
            font-size: 1.05em;
            font-family: inherit;
            resize: none;
            transition: all 0.3s ease;
            min-height: 70px;
        }

        .input-wrapper textarea:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 5px rgba(102, 126, 234, 0.15);
        }

        .btn {
            padding: 18px 30px;
            border: none;
            border-radius: 20px;
            font-size: 1.05em;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: inherit;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            justify-content: center;
        }

        .btn:hover:not(:disabled) {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.2);
        }

        .btn:active:not(:disabled) {
            transform: translateY(0);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
        }

        .btn-success {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
        }

        .btn-danger {
            background: linear-gradient(135deg, #ef4444, #dc2626);
            color: white;
        }

        .btn-warning {
            background: linear-gradient(135deg, #f59e0b, #d97706);
            color: white;
        }

        .btn-secondary {
            background: linear-gradient(135deg, #6b7280, #4b5563);
            color: white;
        }

        .btn-purple {
            background: linear-gradient(135deg, #8b5cf6, #7c3aed);
            color: white;
        }

        .voice-controls {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 12px;
        }

        .sidebar {
            background: linear-gradient(to bottom, #f9fafb 0%, #f3f4f6 100%);
            padding: 30px;
            border-left: 3px solid #e5e7eb;
            overflow-y: auto;
        }

        .sidebar::-webkit-scrollbar {
            width: 8px;
        }

        .sidebar::-webkit-scrollbar-track {
            background: #f1f1f1;
        }

        .sidebar::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border-radius: 10px;
        }

        .feature-section {
            background: white;
            padding: 25px;
            border-radius: 20px;
            margin-bottom: 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }

        .feature-section:hover {
            border-color: var(--primary);
            box-shadow: 0 6px 25px rgba(102, 126, 234, 0.2);
        }

        .feature-section h3 {
            color: var(--primary);
            margin-bottom: 20px;
            font-size: 1.4em;
            display: flex;
            align-items: center;
            gap: 12px;
            font-weight: 800;
        }

        .difficulty-selector {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
            margin-bottom: 15px;
        }

        .difficulty-btn {
            padding: 16px;
            border: 3px solid #e5e7eb;
            background: white;
            border-radius: 15px;
            cursor: pointer;
            font-weight: 700;
            transition: all 0.3s ease;
            text-align: center;
        }

        .difficulty-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.15);
        }

        .difficulty-btn.easy {
            border-color: var(--success);
            color: var(--success);
        }

        .difficulty-btn.easy.active {
            background: var(--success);
            color: white;
            box-shadow: 0 4px 15px rgba(16, 185, 129, 0.4);
        }

        .difficulty-btn.medium {
            border-color: var(--warning);
            color: var(--warning);
        }

        .difficulty-btn.medium.active {
            background: var(--warning);
            color: white;
            box-shadow: 0 4px 15px rgba(245, 158, 11, 0.4);
        }

        .difficulty-btn.hard {
            border-color: var(--danger);
            color: var(--danger);
        }

        .difficulty-btn.hard.active {
            background: var(--danger);
            color: white;
            box-shadow: 0 4px 15px rgba(239, 68, 68, 0.4);
        }

        .topic-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin-bottom: 15px;
        }

        .topic-btn {
            padding: 16px;
            background: white;
            border: 3px solid var(--primary);
            border-radius: 15px;
            color: var(--primary);
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 700;
            text-align: center;
        }

        .topic-btn:hover {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            transform: scale(1.08);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
        }

        .custom-topic-input {
            display: flex;
            gap: 12px;
            margin-top: 15px;
        }

        .custom-topic-input input {
            flex: 1;
            padding: 16px;
            border: 3px solid #e5e7eb;
            border-radius: 15px;
            font-family: inherit;
            font-size: 1em;
        }

        .custom-topic-input input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 4px rgba(102, 126, 234, 0.15);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
        }

        .stat-card {
            background: linear-gradient(135deg, #f3f4f6, #e5e7eb);
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            transition: all 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }

        .stat-card h4 {
            font-size: 3em;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 8px;
            font-weight: 900;
        }

        .stat-card p {
            color: #6b7280;
            font-size: 0.95em;
            font-weight: 600;
        }

        .quick-phrases {
            background: linear-gradient(135deg, #dbeafe, #bfdbfe);
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 15px;
        }

        .quick-phrases h4 {
            color: #1e40af;
            margin-bottom: 15px;
            font-size: 1.05em;
            font-weight: 700;
        }

        .phrase-item {
            background: white;
            padding: 14px 18px;
            border-radius: 12px;
            margin-bottom: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            border-left: 4px solid #3b82f6;
            font-weight: 500;
        }

        .phrase-item:hover {
            transform: translateX(8px);
            box-shadow: 0 4px 15px rgba(59, 130, 246, 0.3);
            border-left-width: 6px;
        }

        .phrase-item:last-child {
            margin-bottom: 0;
        }

        .instructions {
            background: linear-gradient(135deg, #fef3c7, #fde68a);
            padding: 20px;
            border-radius: 15px;
            border-left: 5px solid #f59e0b;
        }

        .instructions h4 {
            color: #92400e;
            margin-bottom: 15px;
            font-size: 1.05em;
            font-weight: 700;
        }

        .instructions ul {
            list-style: none;
            padding: 0;
        }

        .instructions li {
            color: #92400e;
            margin-bottom: 10px;
            padding-left: 25px;
            position: relative;
            font-weight: 500;
        }

        .instructions li:before {
            content: "âœ“";
            position: absolute;
            left: 0;
            color: #f59e0b;
            font-weight: bold;
            font-size: 1.2em;
        }

        .loading-spinner {
            display: inline-block;
            width: 22px;
            height: 22px;
            border: 3px solid rgba(255,255,255,0.3);
            border-top-color: white;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .welcome-message {
            background: linear-gradient(135deg, #e0e7ff, #ddd6fe);
            padding: 30px;
            border-radius: 20px;
            margin-bottom: 25px;
            border-left: 6px solid var(--primary);
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.2);
        }

        .welcome-message h3 {
            color: var(--primary);
            margin-bottom: 18px;
            font-size: 1.6em;
            font-weight: 800;
        }

        .welcome-message p {
            color: #4b5563;
            line-height: 1.8;
            margin-bottom: 12px;
            font-size: 1.05em;
        }

        .voice-call-section {
            background: linear-gradient(135deg, #fce7f3, #fbcfe8);
            padding: 25px;
            border-radius: 20px;
            border: 3px solid #ec4899;
            margin-bottom: 20px;
        }

        .voice-call-section h4 {
            color: #be185d;
            margin-bottom: 15px;
            font-size: 1.2em;
            font-weight: 800;
        }

        .call-status {
            background: white;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            margin-bottom: 15px;
        }

        .call-status .timer {
            font-size: 2.5em;
            font-weight: 900;
            background: linear-gradient(135deg, #ec4899, #be185d);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 2.2em;
            }
            
            .topic-grid,
            .difficulty-selector {
                grid-template-columns: 1fr;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }

            .voice-controls {
                grid-template-columns: 1fr;
            }
        }

        .api-warning {
            background: linear-gradient(135deg, #fee2e2, #fecaca);
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
            border-left: 5px solid #ef4444;
        }

        .api-warning h4 {
            color: #dc2626;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .api-warning p {
            color: #991b1b;
            font-size: 0.95em;
            line-height: 1.6;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="header-content">
                <h1>ğŸ“ AI English Learning Pro</h1>
                <p>ášáŸ€á“á—á¶áŸá¶á¢á„áŸ‹á‚áŸ’á›áŸáŸá‡á¶á˜á½á™ Claude AI - Teacher á–á·áá”áŸ’ášá¶á€áŠáŠáŸ‚á›á¢á¶á…á“á·á™á¶á™á”á¶á“!</p>
                <div class="badge">âš¡ Powered by Claude Sonnet 4 - Real AI Voice Conversation</div>
            </div>
        </div>

        <div class="main-layout">
            <!-- Chat Area -->
            <div class="chat-area">
                <div class="chat-header">
                    <div class="language-switch">
                        <button class="lang-btn active" onclick="switchLanguage('km')" id="btnKm">
                            ğŸ‡°ğŸ‡­ á—á¶áŸá¶ááŸ’á˜áŸ‚áš
                        </button>
                        <button class="lang-btn" onclick="switchLanguage('en')" id="btnEn">
                            ğŸ‡¬ğŸ‡§ English
                        </button>
                    </div>

                    <div id="statusBar" class="status-bar"></div>
                </div>

                <div class="chat-messages" id="chatMessages">
                    <div class="api-warning">
                        <h4>âš ï¸ áŸáŸ†áá¶á“áŸ‹! Important Setup Required</h4>
                        <p><strong>á€á¶ášáá—áŸ’á‡á¶á”áŸ‹á˜á·á“áŠáŸ†áá¾ášá€á¶áš!</strong> This app needs Claude AI to work properly. The built-in responses are limited.</p>
                        <p><strong>ğŸ”§ To use real Claude AI:</strong> You need to add API connection. This demo shows the interface, but for full functionality with natural conversation, grammar correction, and voice features, API integration is required.</p>
                        <p><strong>ğŸ’¡ Current Status:</strong> Demo mode with limited responses. For production use, integrate with Anthropic's Claude API.</p>
                    </div>

                    <div class="welcome-message">
                        <h3>ğŸ‘‹ áŸá¼á˜áŸáŸ’áœá¶á‚á˜á“áŸ! Welcome to AI English Learning!</h3>
                        <p><strong>ğŸ¤– ááŸ’á‰á»áŸ†á‡á¶ Claude AI - English Teacher ášá”áŸáŸ‹á¢áŸ’á“á€!</strong></p>
                        <p>âœ… <strong>Voice Call</strong> - á“á·á™á¶á™á‡á¶á˜á½á™ááŸ’á‰á»áŸ†áŠá¼á…á“á·á™á¶á™á‘á¼ášáŸáŸá–áŸ’á‘!</p>
                        <p>âœ… <strong>Natural Conversation</strong> - ááŸ’á‰á»áŸ†á“á·á™á¶á™áŠá¼á…á˜á“á»áŸáŸ’áŸá–á·áá”áŸ’ášá¶á€áŠ</p>
                        <p>âœ… <strong>Grammar Correction</strong> - á€áŸ‚áá˜áŸ’ášá¼áœá—á¶áŸá¶ášá”áŸáŸ‹á¢áŸ’á“á€á—áŸ’á›á¶á˜áŸ—</p>
                        <p>âœ… <strong>Pronunciation Help</strong> - ášáŸ€á“á€á¶ášá”á‰áŸ’á…áŸá‰áŸáŸ†á¡áŸá„</p>
                        <p>âœ… <strong>Story Generation</strong> - á”á„áŸ’á€á¾áášá¿á„áá¶á˜á€á˜áŸ’ášá·áá›áŸ†á”á¶á€</p>
                        <p>âœ… <strong>24/7 Support</strong> - ááŸ’á‰á»áŸ†ášá„áŸ‹á…á¶áŸ†á‡á½á™á¢áŸ’á“á€á‚áŸ’ášá”áŸ‹á–áŸá›!</p>
                        <p style="margin-top: 20px; font-weight: 700; font-size: 1.1em;">ğŸ¤ á…á»á…á”áŸ’ášá¾ Voice Call á¬áœá¶á™áŸá¶ášá¥á¡á¼áœá“áŸáŸ‡! Click Voice Call or type now! ğŸš€</p>
                    </div>
                </div>

                <div class="input-section">
                    <div class="input-wrapper">
                        <textarea 
                            id="userInput" 
                            placeholder="áœá¶á™áŸá¶ášá‡á¶á—á¶áŸá¶á¢á„áŸ‹á‚áŸ’á›áŸáŸ á¬ááŸ’á˜áŸ‚áš... Type in English or Khmer..."
                            onkeydown="handleKeyPress(event)"
                        ></textarea>
                        <button class="btn btn-primary" onclick="sendMessage()" id="btnSend">
                            ğŸ“¤ á•áŸ’á‰á¾ Send
                        </button>
                    </div>

                    <div class="voice-controls">
                        <button class="btn btn-purple" id="btnVoiceCall" onclick="toggleVoiceCall()">
                            ğŸ“ Voice Call
                        </button>
                        <button class="btn btn-success" id="btnVoice" onclick="toggleVoiceInput()">
                            ğŸ¤ ášáŸ€á“ Speak
                        </button>
                        <button class="btn btn-secondary" onclick="clearChat()">
                            ğŸ—‘ï¸ á›á»á” Clear
                        </button>
                    </div>
                </div>
            </div>

            <!-- Sidebar -->
            <div class="sidebar">
                <!-- Voice Call Feature -->
                <div class="feature-section voice-call-section">
                    <h4>ğŸ“ Voice Call - á“á·á™á¶á™á•áŸ’á‘á¶á›áŸ‹</h4>
                    <div class="call-status">
                        <div class="timer" id="callTimer">00:00</div>
                        <p id="callStatus">Ready to call...</p>
                    </div>
                    <p style="color: #be185d; font-weight: 600; margin-bottom: 10px;">á“á·á™á¶á™áŠá¼á…á“á·á™á¶á™á‘á¼ášáŸáŸá–áŸ’á‘á–á·áá”áŸ’ášá¶á€áŠ!</p>
                    <p style="color: #831843; font-size: 0.9em;">âœ“ AI á“á¹á„á†áŸ’á›á¾á™áá”á—áŸ’á›á¶á˜áŸ—</p>
                    <p style="color: #831843; font-size: 0.9em;">âœ“ á€áŸ‚á€á¶ášá”á‰áŸ’á…áŸá‰áŸáŸ†á¡áŸá„</p>
                    <p style="color: #831843; font-size: 0.9em;">âœ“ áŸá“áŸ’á‘á“á¶á’á˜áŸ’á˜á‡á¶áá·</p>
                </div>

                <!-- Story Generator -->
                <div class="feature-section">
                    <h3>ğŸ“ Story Generator á”á„áŸ’á€á¾áášá¿á„</h3>
                    
                    <h4 style="font-size: 1em; margin-bottom: 12px; color: #6b7280; font-weight: 700;">á€á˜áŸ’ášá·áá›áŸ†á”á¶á€ Difficulty Level:</h4>
                    <div class="difficulty-selector">
                        <button class="difficulty-btn easy active" onclick="setDifficulty('easy')" id="diffEasy">
                            ğŸ˜Š<br>á„á¶á™<br>Easy
                        </button>
                        <button class="difficulty-btn medium" onclick="setDifficulty('medium')" id="diffMedium">
                            ğŸ¤”<br>á˜á’áŸ’á™á˜<br>Medium
                        </button>
                        <button class="difficulty-btn hard" onclick="setDifficulty('hard')" id="diffHard">
                            ğŸ”¥<br>á›áŸ†á”á¶á€<br>Hard
                        </button>
                    </div>

                    <h4 style="font-size: 1em; margin-bottom: 12px; margin-top: 20px; color: #6b7280; font-weight: 700;">á”áŸ’ášá’á¶á“á”á‘ Popular Topics:</h4>
                    <div class="topic-grid">
                        <button class="topic-btn" onclick="generateStory('Adventure')">
                            ğŸ—ºï¸ á€á¶ášá•áŸ’áŸá„á–áŸ’ášáŸá„<br>Adventure
                        </button>
                        <button class="topic-btn" onclick="generateStory('Friendship')">
                            ğŸ‘¥ á˜á·ááŸ’áá—á¶á–<br>Friendship
                        </button>
                        <button class="topic-btn" onclick="generateStory('Technology')">
                            ğŸ’» á”á…áŸ’á…áŸá€áœá·á‘áŸ’á™á¶<br>Technology
                        </button>
                        <button class="topic-btn" onclick="generateStory('Nature')">
                            ğŸŒ³ á’á˜áŸ’á˜á‡á¶áá·<br>Nature
                        </button>
                        <button class="topic-btn" onclick="generateStory('Daily Life')">
                            ğŸ  á‡á¸áœá·á<br>Daily Life
                        </button>
                        <button class="topic-btn" onclick="generateStory('Food')">
                            ğŸœ á¢á¶á á¶áš<br>Food
                        </button>
                    </div>

                    <div class="custom-topic-input">
                        <input 
                            type="text" 
                            id="customTopic" 
                            placeholder="á”áŸ’ášá’á¶á“á”á‘á•áŸ’á‘á¶á›áŸ‹ááŸ’á›á½á“... Custom topic..."
                            onkeypress="if(event.key==='Enter') generateCustomStory()"
                        >
                        <button class="btn btn-warning" onclick="generateCustomStory()">
                            âœ¨ Generate
                        </button>
                    </div>
                </div>

                <!-- Quick Phrases -->
                <div class="feature-section">
                    <h3>ğŸ’¬ Quick Practice Phrases</h3>
                    <div class="quick-phrases">
                        <h4>á…á»á…áŠá¾á˜áŸ’á”á¸á”áŸ’ášá¾á—áŸ’á›á¶á˜áŸ— Click to use instantly:</h4>
                        <div class="phrase-item" onclick="useQuickPhrase('I want to practice speaking English with you. Please talk to me like a real conversation.')">
                            ğŸ’¬ "Practice conversation with me"
                        </div>
                        <div class="phrase-item" onclick="useQuickPhrase('Can you correct my English grammar and pronunciation? I will say: I go to school yesterday.')">
                            âœ… "Check my grammar and pronunciation"
                        </div>
                        <div class="phrase-item" onclick="useQuickPhrase('Tell me an interesting story that helps me learn new vocabulary words.')">
                            ğŸ“– "Tell me a learning story"
                        </div>
                        <div class="phrase-item" onclick="useQuickPhrase('Teach me how to use present perfect tense with examples.')">
                            ğŸ“š "Teach me grammar rules"
                        </div>
                        <div class="phrase-item" onclick="useQuickPhrase('Give me 10 common English phrases for daily conversation.')">
                            ğŸ—£ï¸ "Daily conversation phrases"
                        </div>
                    </div>
                </div>

                <!-- Statistics -->
                <div class="feature-section">
                    <h3>ğŸ“Š Learning Statistics áŸáŸ’áá·áá·</h3>
                    <div class="stats-grid">
                        <div class="stat-card">
                            <h4 id="statMessages">0</h4>
                            <p>áŸá¶áš<br>Messages</p>
                        </div>
                        <div class="stat-card">
                            <h4 id="statStories">0</h4>
                            <p>ášá¿á„<br>Stories</p>
                        </div>
                        <div class="stat-card">
                            <h4 id="statVoice">0</h4>
                            <p>áŸáŸ†á¡áŸá„<br>Voice Uses</p>
                        </div>
                        <div class="stat-card">
                            <h4 id="statWords">0</h4>
                            <p>á–á¶á€áŸ’á™<br>Words</p>
                        </div>
                    </div>
                </div>

                <!-- Instructions -->
                <div class="feature-section">
                    <div class="instructions">
                        <h4>ğŸ’¡ Tips for Best Learning á‚á“áŸ’á›á¹áŸ‡áŸá˜áŸ’ášá¶á”áŸ‹á€á¶ášášáŸ€á“á›áŸ’á¢á”áŸ†á•á»á</h4>
                        <ul>
                            <li>á”áŸ’ášá¾ Voice Call áŸá˜áŸ’ášá¶á”áŸ‹á€á¶ášá¢á“á»áœááŸ’áá“á·á™á¶á™á–á·áá”áŸ’ášá¶á€áŠ</li>
                            <li>á“á·á™á¶á™á‘áŸ€á„á‘á¶ááŸ‹ášáŸ€á„ášá¶á›áŸ‹ááŸ’á„áŸƒá™áŸ‰á¶á„áá·á… áŸ¡áŸ á“á¶á‘á¸</li>
                            <li>á€á»áŸ†ááŸ’á›á¶á…á’áŸ’áœá¾á€áŸ†á á»áŸ - AI á“á¹á„á€áŸ‚á‡á¼á“á¢áŸ’á“á€</li>
                            <li>áŸá½ášáŸáŸ†áá½ášáá¶á˜á½á™áŠáŸ‚á›á¢áŸ’á“á€á˜á·á“á™á›áŸ‹</li>
                            <li>ášáŸ€á“á–á¸ášá¿á„áŠáŸ‚á› AI á”á„áŸ’á€á¾áá‡á¼á“</li>
                            <li>á¢á“á»áœááŸ’ááœáŸá™áŸ’á™á¶á€ášááŸáá¶á˜ášá™áŸˆá€á¶ášáŸá“áŸ’á‘á“á¶</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ========================================
        // CONFIGURATION & STATE
        // ========================================
        
        let currentLanguage = 'km';
        let currentDifficulty = 'easy';
        let isVoiceActive = false;
        let isCallActive = false;
        let callStartTime = null;
        let callInterval = null;
        let recognition = null;
        let synthesis = window.speechSynthesis;
        
        let stats = {
            messages: 0,
            stories: 0,
            voice: 0,
            words: 0
        };

        let conversationHistory = [];

        // ========================================
        // CLAUDE AI INTEGRATION (Real API)
        // ========================================
        
        async function sendToClaudeAPI(userMessage) {
            try {
                showStatus('processing', 'ğŸ§  Claude AI á€áŸ†á–á»á„á‚á·á... Claude is thinking...');
                
                // Add user message to history
                conversationHistory.push({
                    role: "user",
                    content: userMessage
                });

                const response = await fetch("https://api.anthropic.com/v1/messages", {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json",
                    },
                    body: JSON.stringify({
                        model: "claude-sonnet-4-20250514",
                        max_tokens: 2000,
                        messages: conversationHistory,
                        system: `You are an enthusiastic, patient, and encouraging English teacher named Claude. Your teaching style is:

ğŸ¯ PERSONALITY:
- Warm, friendly, and motivating like a real teacher
- Patient with mistakes - always encourage students
- Use natural, conversational English (not robotic)
- Show genuine interest in student's progress
- Celebrate small victories

ğŸ“š TEACHING APPROACH:
- Correct grammar naturally in responses
- Provide clear explanations with examples
- Use simple words for easy level, complex for hard
- Give pronunciation tips when asked
- Create engaging, relevant stories
- Mix Khmer and English to help understanding

âœ… WHEN CORRECTING:
- Point out mistakes gently
- Explain WHY it's wrong
- Give the correct version
- Provide similar examples
- Encourage them to try again

ğŸ—£ï¸ FOR VOICE CONVERSATIONS:
- Respond conversationally like a phone call
- Ask follow-up questions
- Show interest in their answers
- Vary sentence length naturally
- Use contractions (I'm, you're, don't)

Remember: You're not just teaching English - you're building confidence! Make every interaction encouraging and supportive.

Current difficulty level: ${currentDifficulty}
Student's language preference: ${currentLanguage === 'km' ? 'Khmer/English mix' : 'Primarily English'}`
                    })
                });

                if (!response.ok) {
                    throw new Error(`API Error: ${response.status}`);
                }

                const data = await response.json();
                const claudeResponse = data.content[0].text;

                // Add Claude's response to history
                conversationHistory.push({
                    role: "assistant",
                    content: claudeResponse
                });

                hideStatus();
                return claudeResponse;

            } catch (error) {
                console.error('Claude API Error:', error);
                hideStatus();
                return getFallbackResponse(userMessage);
            }
        }

        // ========================================
        // FALLBACK RESPONSES (When API unavailable)
        // ========================================
        
        function getFallbackResponse(message) {
            const msg = message.toLowerCase();
            
            if (msg.includes('hello') || msg.includes('hi') || msg.includes('á‡á˜áŸ’ášá¶á”áŸá½áš')) {
                return `Hello! ğŸ‘‹ áŸá½áŸáŸ’áá¸!\n\nâš ï¸ Note: I'm running in demo mode. For the full Claude AI experience with natural conversation, grammar correction, and personalized teaching, API integration is needed.\n\nBut I can still help you practice! What would you like to learn today?`;
            }

            if (msg.includes('story') || msg.includes('ášá¿á„')) {
                return generateStoryContent('general');
            }

            if (msg.includes('grammar') || msg.includes('correct')) {
                return `I'd love to help with grammar! ğŸ“\n\nâš ï¸ Demo Mode: For real-time grammar correction with detailed explanations, Claude AI API is needed.\n\nExample correction:\nâŒ "I go to school yesterday"\nâœ… "I went to school yesterday"\n\nThe verb 'go' changes to 'went' in past tense!`;
            }

            return `I understand you said: "${message}"\n\nâš ï¸ Demo Mode Active: This is a limited demo response.\n\nFor full functionality:\nâœ… Natural conversations like a real teacher\nâœ… Personalized grammar corrections\nâœ… Smart voice interactions\nâœ… Adaptive learning content\n\n...Claude AI API integration is required.\n\nHow else can I help you practice English?`;
        }

        // ========================================
        // VOICE CALL FEATURE
        // ========================================
        
        async function toggleVoiceCall() {
            if (isCallActive) {
                endVoiceCall();
            } else {
                startVoiceCall();
            }
        }

        function startVoiceCall() {
            isCallActive = true;
            callStartTime = Date.now();
            
            const btn = document.getElementById('btnVoiceCall');
            btn.innerHTML = 'ğŸ“ End Call';
            btn.classList.remove('btn-purple');
            btn.classList.add('btn-danger');
            
            showStatus('connected', 'ğŸ“ Voice Call Active - á“á·á™á¶á™á¥á¡á¼áœ! Speak now!');
            document.getElementById('callStatus').textContent = 'Call Active - Speaking...';
            
            // Start timer
            callInterval = setInterval(updateCallTimer, 1000);
            
            // Start continuous recognition
            if (recognition) {
                recognition.continuous = true;
                recognition.interimResults = true;
                try {
                    recognition.start();
                } catch (e) {
                    console.log('Recognition already started');
                }
            }
            
            // Welcome message
            speak("Hello! I'm Claude, your English teacher. I'm ready to talk with you! How are you today? What would you like to practice?");
            addMessage("ğŸ“ Voice Call Started! Say 'Hello' to begin...", 'ai');
        }

        function endVoiceCall() {
            isCallActive = false;
            callStartTime = null;
            
            const btn = document.getElementById('btnVoiceCall');
            btn.innerHTML = 'ğŸ“ Voice Call';
            btn.classList.remove('btn-danger');
            btn.classList.add('btn-purple');
            
            if (callInterval) {
                clearInterval(callInterval);
                callInterval = null;
            }
            
            document.getElementById('callTimer').textContent = '00:00';
            document.getElementById('callStatus').textContent = 'Ready to call...';
            hideStatus();
            
            if (recognition && isVoiceActive) {
                recognition.stop();
            }
            
            speak("Goodbye! Great practice session today! Keep learning!");
            addMessage("ğŸ“ Voice Call Ended. Great job practicing! ğŸ‰", 'ai');
        }

        function updateCallTimer() {
            if (!callStartTime) return;
            
            const elapsed = Math.floor((Date.now() - callStartTime) / 1000);
            const minutes = Math.floor(elapsed / 60);
            const seconds = elapsed % 60;
            
            document.getElementById('callTimer').textContent = 
                `${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
        }

        // ========================================
        // SPEECH RECOGNITION & SYNTHESIS
        // ========================================
        
        function initSpeechRecognition() {
            if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
                const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
                recognition = new SpeechRecognition();
                recognition.continuous = false;
                recognition.interimResults = false;
                recognition.lang = 'en-US';

                recognition.onstart = () => {
                    isVoiceActive = true;
                    if (!isCallActive) {
                        showStatus('listening', 'ğŸ¤ á€áŸ†á–á»á„áŸáŸ’áá¶á”áŸ‹... Listening...');
                        document.getElementById('btnVoice').innerHTML = 'â¹ï¸ Stop';
                        document.getElementById('btnVoice').classList.remove('btn-success');
                        document.getElementById('btnVoice').classList.add('btn-danger');
                    }
                };

                recognition.onresult = async (event) => {
                    const transcript = event.results[event.results.length - 1][0].transcript;
                    
                    if (isCallActive) {
                        // In call mode, process immediately
                        addMessage(transcript, 'user');
                        const response = await sendToClaudeAPI(transcript);
                        addMessage(response, 'ai');
                        speak(response);
                        
                        stats.messages++;
                        stats.voice++;
                        stats.words += transcript.split(' ').length;
                        updateStats();
                        
                        // Continue listening in call mode
                        setTimeout(() => {
                            try {
                                recognition.start();
                            } catch (e) {
                                console.log('Recognition restart handled');
                            }
                        }, 500);
                    } else {
                        // Normal voice input mode
                        document.getElementById('userInput').value = transcript;
                        setTimeout(() => sendMessage(), 500);
                    }
                };

                recognition.onerror = (event) => {
                    console.error('Speech recognition error:', event.error);
                    if (!isCallActive) {
                        showStatus('error', 'âŒ Error: ' + event.error);
                        resetVoiceButton();
                    } else if (event.error !== 'no-speech') {
                        // In call mode, try to restart unless it's a critical error
                        setTimeout(() => {
                            try {
                                recognition.start();
                            } catch (e) {
                                console.log('Could not restart recognition');
                            }
                        }, 1000);
                    }
                };

                recognition.onend = () => {
                    if (!isCallActive) {
                        resetVoiceButton();
                    }
                };
            }
        }

        function toggleVoiceInput() {
            if (!recognition) {
                alert('Speech recognition is not supported in your browser.\náŸá¼á˜á”áŸ’ášá¾ Google Chrome á¬ Microsoft Edge.');
                return;
            }

            if (isVoiceActive && !isCallActive) {
                recognition.stop();
            } else if (!isCallActive) {
                try {
                    recognition.start();
                    stats.voice++;
                    updateStats();
                } catch (e) {
                    console.error('Error starting recognition:', e);
                }
            }
        }

        function resetVoiceButton() {
            isVoiceActive = false;
            document.getElementById('btnVoice').innerHTML = 'ğŸ¤ ášáŸ€á“ Speak';
            document.getElementById('btnVoice').classList.remove('btn-danger');
            document.getElementById('btnVoice').classList.add('btn-success');
            hideStatus();
        }

        function speak(text) {
            if (!synthesis) return;
            
            synthesis.cancel();
            
            // Split long text into sentences for more natural pauses
            const sentences = text.match(/[^.!?]+[.!?]+/g) || [text];
            
            sentences.forEach((sentence, index) => {
                const utterance = new SpeechSynthesisUtterance(sentence.trim());
                utterance.lang = 'en-US';
                utterance.rate = 0.9; // Slightly slower for learning
                utterance.pitch = 1.0;
                utterance.volume = 1;

                if (index === 0) {
                    utterance.onstart = () => {
                        if (!isCallActive) {
                            showStatus('speaking', 'ğŸ”Š á€áŸ†á–á»á„á“á·á™á¶á™... Speaking...');
                        }
                    };
                }

                if (index === sentences.length - 1) {
                    utterance.onend = () => {
                        if (!isCallActive) {
                            hideStatus();
                        }
                    };
                }

                utterance.onerror = (event) => {
                    console.error('Speech error:', event);
                    if (!isCallActive) {
                        hideStatus();
                    }
                };

                // Add slight delay between sentences
                setTimeout(() => synthesis.speak(utterance), index * 100);
            });
        }

        // ========================================
        // MESSAGE HANDLING
        // ========================================
        
        async function sendMessage() {
            const input = document.getElementById('userInput');
            const message = input.value.trim();

            if (!message) return;

            addMessage(message, 'user');
            input.value = '';

            const aiResponse = await sendToClaudeAPI(message);
            addMessage(aiResponse, 'ai');
            speak(aiResponse);

            stats.messages++;
            stats.words += message.split(' ').length;
            updateStats();
        }

        function addMessage(text, type) {
            const messagesDiv = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${type}`;

            const bubble = document.createElement('div');
            bubble.className = 'message-bubble';

            const header = document.createElement('div');
            header.className = 'message-header';
            header.textContent = type === 'user' ? 'ğŸ‘¤ á¢áŸ’á“á€ You' : 'ğŸ¤– Claude Teacher';

            const content = document.createElement('div');
            content.className = 'message-content';
            content.textContent = text;

            const time = document.createElement('div');
            time.className = 'message-time';
            time.textContent = new Date().toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit' });

            bubble.appendChild(header);
            bubble.appendChild(content);
            bubble.appendChild(time);
            messageDiv.appendChild(bubble);
            messagesDiv.appendChild(messageDiv);

            messagesDiv.scrollTop = messagesDiv.scrollHeight;
        }

        // ========================================
        // STORY GENERATION
        // ========================================
        
        async function generateStory(topic) {
            showStatus('processing', 'âœ¨ á€áŸ†á–á»á„á”á„áŸ’á€á¾áášá¿á„... Generating story...');
            
            const prompt = `Create an engaging English learning story about "${topic}" at ${currentDifficulty} level. 

Requirements:
- ${currentDifficulty === 'easy' ? 'Use simple vocabulary and short sentences' : currentDifficulty === 'medium' ? 'Use moderate vocabulary and varied sentence structures' : 'Use advanced vocabulary and complex sentences'}
- Make it interesting and educational
- Include 5-7 key vocabulary words
- Add a moral or lesson
- Length: ${currentDifficulty === 'easy' ? '100-150' : currentDifficulty === 'medium' ? '150-200' : '200-250'} words

Format:
ğŸ“š [Story Title]

[Story content with paragraphs]

---
ğŸ’¡ Key Vocabulary:
1. word1 - definition
2. word2 - definition
etc.

Moral: [lesson learned]`;

            const story = await sendToClaudeAPI(prompt);
            hideStatus();
            addMessage(`á”á„áŸ’á€á¾áášá¿á„á¢áŸ†á–á¸ "${topic}" (${currentDifficulty})`, 'user');
            addMessage(story, 'ai');
            
            // Speak just the title and first paragraph
            const firstPart = story.split('\n\n')[0] + '. ' + (story.split('\n\n')[1] || '');
            speak(firstPart);
            
            stats.stories++;
            updateStats();
        }

        function generateCustomStory() {
            const topicInput = document.getElementById('customTopic');
            const topic = topicInput.value.trim();
            
            if (!topic) {
                alert('áŸá¼á˜á”á‰áŸ’á…á¼á›á”áŸ’ášá’á¶á“á”á‘!\nPlease enter a topic!');
                return;
            }
            
            generateStory(topic);
            topicInput.value = '';
        }

        // Generated story content for demo mode
        function generateStoryContent(topic) {
            return `ğŸ“š Demo Story: ${topic}\n\nThis is a demo story. For personalized, adaptive stories based on your level and interests, Claude AI integration is needed.\n\nThe real version would:\nâœ… Create unique stories every time\nâœ… Match your difficulty level perfectly\nâœ… Include relevant vocabulary\nâœ… Provide learning points\n\nWould you like to see more features?`;
        }

        // ========================================
        // UTILITY FUNCTIONS
        // ========================================
        
        function setDifficulty(level) {
            currentDifficulty = level;
            
            document.getElementById('diffEasy').classList.toggle('active', level === 'easy');
            document.getElementById('diffMedium').classList.toggle('active', level === 'medium');
            document.getElementById('diffHard').classList.toggle('active', level === 'hard');
            
            const levelText = level === 'easy' ? 'á„á¶á™ Easy' : level === 'medium' ? 'á˜á’áŸ’á™á˜ Medium' : 'á›áŸ†á”á¶á€ Hard';
            addMessage(`âœ… á€áŸ†ášá·áá•áŸ’á›á¶áŸáŸ‹á”áŸ’áá¼ášá‘áŸ…: ${levelText}`, 'ai');
        }

        function switchLanguage(lang) {
            currentLanguage = lang;
            document.getElementById('btnKm').classList.toggle('active', lang === 'km');
            document.getElementById('btnEn').classList.toggle('active', lang === 'en');
        }

        function useQuickPhrase(phrase) {
            document.getElementById('userInput').value = phrase;
            document.getElementById('userInput').focus();
        }

        function clearChat() {
            if (confirm('áá¾á¢áŸ’á“á€á”áŸ’ášá¶á€áŠáá¶á…á„áŸ‹á›á»á”áŸá¶ášá‘á¶áŸ†á„á¢áŸáŸ‹?\nClear all messages?')) {
                conversationHistory = []; // Reset conversation history
                const messagesDiv = document.getElementById('chatMessages');
                messagesDiv.innerHTML = `
                    <div class="welcome-message">
                        <h3>ğŸ”„ Chat Cleared! á€á¶ášáŸá“áŸ’á‘á“á¶ááŸ’á˜á¸</h3>
                        <p>Ready for a fresh start! ááŸ„áŸ‡á…á¶á”áŸ‹á•áŸ’áá¾á˜áŸá“áŸ’á‘á“á¶ááŸ’á˜á¸! ğŸš€</p>
                    </div>
                `;
            }
        }

        function showStatus(type, message) {
            const statusBar = document.getElementById('statusBar');
            statusBar.className = `status-bar ${type}`;
            statusBar.textContent = message;
            statusBar.style.display = 'block';
        }

        function hideStatus() {
            const statusBar = document.getElementById('statusBar');
            statusBar.style.display = 'none';
        }

        function updateStats() {
            document.getElementById('statMessages').textContent = stats.messages;
            document.getElementById('statStories').textContent = stats.stories;
            document.getElementById('statVoice').textContent = stats.voice;
            document.getElementById('statWords').textContent = stats.words;
            
            localStorage.setItem('englishLearningStats', JSON.stringify(stats));
        }

        function loadStats() {
            const saved = localStorage.getItem('englishLearningStats');
            if (saved) {
                stats = JSON.parse(saved);
                updateStats();
            }
        }

        function handleKeyPress(event) {
            if (event.key === 'Enter' && !event.shiftKey) {
                event.preventDefault();
                sendMessage();
            }
        }

        // ========================================
        // INITIALIZATION
        // ========================================
        
        window.onload = () => {
            console.log('ğŸ“ AI English Learning Pro - Initializing...');
            console.log('âœ… Claude AI Ready (API required for full functionality)');
            console.log('âœ… Voice features initialized');
            
            initSpeechRecognition();
            loadStats();
            
            // Welcome message
            setTimeout(() => {
                speak("Welcome to AI English Learning Pro! I'm Claude, your personal English teacher. Let's start learning together!");
            }, 1500);
        };

        // Cleanup on page unload
        window.onbeforeunload = () => {
            if (isCallActive) {
                endVoiceCall();
            }
            if (synthesis) {
                synthesis.cancel();
            }
        };
    </script>
</body>
</html>
