<!DOCTYPE html>
<html lang="km">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ“ AI English Learning - ášáŸ€á“á—á¶áŸá¶á¢á„áŸ‹á‚áŸ’á›áŸáŸá‡á¶á˜á½á™ AI</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Kantumruy Pro', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            padding: 30px;
        }

        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
            }
        }

        .chat-section {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 20px;
            display: flex;
            flex-direction: column;
            height: 600px;
        }

        .chat-messages {
            flex: 1;
            overflow-y: auto;
            margin-bottom: 20px;
            padding: 15px;
            background: white;
            border-radius: 10px;
            border: 2px solid #e9ecef;
        }

        .message {
            margin-bottom: 15px;
            padding: 15px;
            border-radius: 10px;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .message.user {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            margin-left: 20%;
            text-align: right;
        }

        .message.ai {
            background: #e3f2fd;
            color: #1565c0;
            margin-right: 20%;
        }

        .message-header {
            font-weight: bold;
            margin-bottom: 8px;
            font-size: 0.9em;
            opacity: 0.8;
        }

        .message-content {
            line-height: 1.6;
            font-size: 1em;
        }

        .input-area {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }

        .input-area input {
            flex: 1;
            padding: 15px;
            border: 2px solid #667eea;
            border-radius: 10px;
            font-size: 1em;
            font-family: inherit;
        }

        .input-area input:focus {
            outline: none;
            border-color: #764ba2;
            box-shadow: 0 0 0 3px rgba(118, 75, 162, 0.1);
        }

        .btn {
            padding: 15px 25px;
            border: none;
            border-radius: 10px;
            font-size: 1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: inherit;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .btn-secondary {
            background: #28a745;
            color: white;
        }

        .btn-secondary:hover {
            background: #218838;
            transform: translateY(-2px);
        }

        .btn-danger {
            background: #dc3545;
            color: white;
        }

        .btn-danger:hover {
            background: #c82333;
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
        }

        .voice-controls {
            display: flex;
            gap: 10px;
            justify-content: center;
        }

        .features-section {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .feature-card {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 15px;
            border-left: 5px solid #667eea;
        }

        .feature-card h3 {
            color: #667eea;
            margin-bottom: 15px;
            font-size: 1.3em;
        }

        .topic-buttons {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-top: 15px;
        }

        .topic-btn {
            padding: 12px;
            background: white;
            border: 2px solid #667eea;
            border-radius: 10px;
            color: #667eea;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            font-family: inherit;
        }

        .topic-btn:hover {
            background: #667eea;
            color: white;
            transform: scale(1.05);
        }

        .custom-topic {
            margin-top: 15px;
            display: flex;
            gap: 10px;
        }

        .custom-topic input {
            flex: 1;
            padding: 12px;
            border: 2px solid #667eea;
            border-radius: 10px;
            font-family: inherit;
        }

        .status-indicator {
            text-align: center;
            padding: 10px;
            border-radius: 10px;
            margin-bottom: 15px;
            font-weight: bold;
        }

        .status-indicator.listening {
            background: #28a745;
            color: white;
            animation: pulse 1.5s infinite;
        }

        .status-indicator.speaking {
            background: #007bff;
            color: white;
            animation: pulse 1.5s infinite;
        }

        .status-indicator.processing {
            background: #ffc107;
            color: #000;
        }

        @keyframes pulse {
            0%, 100% {
                opacity: 1;
            }
            50% {
                opacity: 0.7;
            }
        }

        .language-switch {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 20px;
        }

        .lang-btn {
            padding: 10px 20px;
            border: 2px solid #667eea;
            background: white;
            color: #667eea;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            font-family: inherit;
        }

        .lang-btn.active {
            background: #667eea;
            color: white;
        }

        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-left: 10px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .instructions {
            background: #fff3cd;
            padding: 15px;
            border-radius: 10px;
            border-left: 5px solid #ffc107;
            margin-bottom: 20px;
        }

        .instructions h4 {
            color: #856404;
            margin-bottom: 10px;
        }

        .instructions ul {
            margin-left: 20px;
            color: #856404;
        }

        .instructions li {
            margin-bottom: 5px;
        }

        .example-phrases {
            background: #d1ecf1;
            padding: 15px;
            border-radius: 10px;
            border-left: 5px solid #0c5460;
        }

        .example-phrases h4 {
            color: #0c5460;
            margin-bottom: 10px;
        }

        .example-phrases p {
            color: #0c5460;
            margin: 5px 0;
            padding: 5px 10px;
            background: white;
            border-radius: 5px;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-top: 20px;
        }

        .stat-card {
            background: white;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            border: 2px solid #e9ecef;
        }

        .stat-card h4 {
            color: #667eea;
            font-size: 2em;
            margin-bottom: 5px;
        }

        .stat-card p {
            color: #6c757d;
            font-size: 0.9em;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ“ AI English Learning Assistant</h1>
            <p>ášáŸ€á“á—á¶áŸá¶á¢á„áŸ‹á‚áŸ’á›áŸáŸá‡á¶á˜á½á™ AI áŠáŸ‚á›á¢á¶á…á“á·á™á¶á™á”á¶á“</p>
        </div>

        <div class="main-content">
            <!-- á•áŸ’á“áŸ‚á€á‡á‡áŸ‚á€ -->
            <div class="chat-section">
                <div class="language-switch">
                    <button class="lang-btn active" onclick="switchLanguage('km')" id="btnKm">ğŸ‡°ğŸ‡­ ááŸ’á˜áŸ‚áš</button>
                    <button class="lang-btn" onclick="switchLanguage('en')" id="btnEn">ğŸ‡¬ğŸ‡§ English</button>
                </div>

                <div id="statusIndicator" class="status-indicator" style="display: none;"></div>

                <div class="chat-messages" id="chatMessages">
                    <div class="message ai">
                        <div class="message-header">ğŸ¤– AI Teacher</div>
                        <div class="message-content">
                            <strong>á‡áŸ†ášá¶á”áŸá½áš!</strong> I'm your AI English teacher. I can help you learn English through conversation.<br><br>
                            <strong>á¢áŸ’á“á€á¢á¶á…á’áŸ’áœá¾á¢áŸ’áœá¸á”á¶á“áŸ–</strong><br>
                            â€¢ á‡á‡áŸ‚á€á‡á¶á˜á½á™ááŸ’á‰á»áŸ†áŠá¾á˜áŸ’á”á¸á¢á“á»áœááŸ’áá—á¶áŸá¶á¢á„áŸ‹á‚áŸ’á›áŸáŸ<br>
                            â€¢ áŸáŸ’á“á¾áŸá»áŸ†á±áŸ’á™ááŸ’á‰á»áŸ†á”á„áŸ’á€á¾áá¢ááŸ’áá”á‘ááŸ’á›á¸áŸ—áá¶á˜á”áŸ’ášá’á¶á“á”á‘<br>
                            â€¢ á“á·á™á¶á™á‡á¶á˜á½á™ááŸ’á‰á»áŸ†áŠáŸ„á™á”áŸ’ášá¾áŸáŸ†á¡áŸá„<br>
                            â€¢ áŸá½ášáŸáŸ†áá½ášáá¶á˜á½á™á¢áŸ†á–á¸á—á¶áŸá¶á¢á„áŸ‹á‚áŸ’á›áŸáŸ<br><br>
                            ááŸ„áŸ‡á…á¶á”áŸ‹á•áŸ’áá¾á˜! How can I help you today?
                        </div>
                    </div>
                </div>

                <div class="input-area">
                    <input type="text" id="userInput" placeholder="áœá¶á™áŸá¶ášá“áŸ…á‘á¸á“áŸáŸ‡... (Type your message here...)" onkeypress="handleKeyPress(event)">
                    <button class="btn btn-primary" onclick="sendMessage()">ğŸ“¤ á•áŸ’á‰á¾</button>
                </div>

                <div class="voice-controls">
                    <button class="btn btn-secondary" id="btnListen" onclick="startListening()">ğŸ¤ á“á·á™á¶á™ (Speak)</button>
                    <button class="btn btn-danger" id="btnStop" onclick="stopListening()" style="display: none;">â¹ï¸ á”á‰áŸ’áˆá”áŸ‹</button>
                </div>
            </div>

            <!-- á•áŸ’á“áŸ‚á€á˜á»áá„á¶áš -->
            <div class="features-section">
                <div class="feature-card">
                    <h3>ğŸ“ á”á„áŸ’á€á¾áá¢ááŸ’áá”á‘áá¶á˜á”áŸ’ášá’á¶á“á”á‘</h3>
                    <p>á‡áŸ’ášá¾áŸášá¾áŸá”áŸ’ášá’á¶á“á”á‘ á¬á”á‰áŸ’á…á¼á›á”áŸ’ášá’á¶á“á”á‘á•áŸ’á‘á¶á›áŸ‹ááŸ’á›á½á“</p>
                    <div class="topic-buttons">
                        <button class="topic-btn" onclick="generateStory('ášá¿á„á–áŸ’ášáŸá„á“á·á‘á¶á“')">ğŸ§š ášá¿á„á–áŸ’ášáŸá„á“á·á‘á¶á“<br>Fairy Tales</button>
                        <button class="topic-btn" onclick="generateStory('á€á¶ášá’áŸ’áœá¾áŠáŸ†áá¾áš')">âœˆï¸ á€á¶ášá’áŸ’áœá¾áŠáŸ†áá¾áš<br>Travel</button>
                        <button class="topic-btn" onclick="generateStory('á”á…áŸ’á…áŸá€áœá·á‘áŸ’á™á¶')">ğŸ’» á”á…áŸ’á…áŸá€áœá·á‘áŸ’á™á¶<br>Technology</button>
                        <button class="topic-btn" onclick="generateStory('á¢á¶á á¶áš')">ğŸœ á¢á¶á á¶áš<br>Food</button>
                        <button class="topic-btn" onclick="generateStory('á€á¸á¡á¶')">âš½ á€á¸á¡á¶<br>Sports</button>
                        <button class="topic-btn" onclick="generateStory('áá“áŸ’ááŸ’ášá¸')">ğŸµ áá“áŸ’ááŸ’ášá¸<br>Music</button>
                    </div>
                    <div class="custom-topic">
                        <input type="text" id="customTopic" placeholder="á”á‰áŸ’á…á¼á›á”áŸ’ášá’á¶á“á”á‘á•áŸ’á‘á¶á›áŸ‹ááŸ’á›á½á“...">
                        <button class="btn btn-primary" onclick="generateCustomStory()">âœ¨ á”á„áŸ’á€á¾á</button>
                    </div>
                </div>

                <div class="feature-card">
                    <h3>ğŸ’¡ á‚á“áŸ’á›á¹áŸ‡ášáŸ€á“á—á¶áŸá¶</h3>
                    <div class="instructions">
                        <h4>ášá”áŸ€á”á”áŸ’ášá¾á”áŸ’ášá¶áŸáŸ‹áŸ–</h4>
                        <ul>
                            <li><strong>áœá¶á™áŸá¶áš</strong> á¬ <strong>á“á·á™á¶á™</strong> á‡á¶á—á¶áŸá¶á¢á„áŸ‹á‚áŸ’á›áŸáŸ á¬ááŸ’á˜áŸ‚áš</li>
                            <li>AI á“á¹á„á†áŸ’á›á¾á™áá”á‡á¶á—á¶áŸá¶á¢á„áŸ‹á‚áŸ’á›áŸáŸ</li>
                            <li>áŸáŸ’á“á¾áŸá»áŸ†á±áŸ’á™ AI á”á„áŸ’á€á¾áá¢ááŸ’áá”á‘áá¶á˜á”áŸ’ášá’á¶á“á”á‘</li>
                            <li>áŸá½ášáŸáŸ†áá½ášá¢áŸ†á–á¸áœáŸá™áŸ’á™á¶á€ášááŸ á¬á–á¶á€áŸ’á™</li>
                        </ul>
                    </div>

                    <div class="example-phrases">
                        <h4>á§á‘á¶á ášááŸá”áŸ’ášá™áŸ„á‚áŸ–</h4>
                        <p>âœ… "Tell me a story about a brave knight"</p>
                        <p>âœ… "How do I use past tense?"</p>
                        <p>âœ… "Create a dialogue at a restaurant"</p>
                        <p>âœ… "á”áŸ’ášá¶á”áŸ‹ááŸ’á‰á»áŸ†á¢áŸ†á–á¸áŸááŸ’áœá˜á½á™á‡á¶á—á¶áŸá¶á¢á„áŸ‹á‚áŸ’á›áŸáŸ"</p>
                    </div>
                </div>

                <div class="feature-card">
                    <h3>ğŸ“Š áŸáŸ’áá·áá·ášá”áŸáŸ‹á¢áŸ’á“á€</h3>
                    <div class="stats">
                        <div class="stat-card">
                            <h4 id="messageCount">0</h4>
                            <p>áŸá¶áš<br>Messages</p>
                        </div>
                        <div class="stat-card">
                            <h4 id="storyCount">0</h4>
                            <p>á¢ááŸ’áá”á‘<br>Stories</p>
                        </div>
                        <div class="stat-card">
                            <h4 id="voiceCount">0</h4>
                            <p>áŸáŸ†á¡áŸá„<br>Voice</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // á€á¶ášá€áŸ†áááŸ‹
        let currentLanguage = 'km';
        let recognition = null;
        let synthesis = window.speechSynthesis;
        let isListening = false;
        let stats = {
            messages: 0,
            stories: 0,
            voice: 0
        };

        // á…á¶á”áŸ‹á•áŸ’áá¾á˜ Speech Recognition
        function initSpeechRecognition() {
            if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
                const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
                recognition = new SpeechRecognition();
                recognition.continuous = false;
                recognition.interimResults = false;
                recognition.lang = 'en-US';

                recognition.onstart = () => {
                    isListening = true;
                    showStatus('listening', 'á€áŸ†á–á»á„áŸáŸ’áá¶á”áŸ‹... Listening...');
                    document.getElementById('btnListen').style.display = 'none';
                    document.getElementById('btnStop').style.display = 'inline-block';
                };

                recognition.onresult = (event) => {
                    const transcript = event.results[0][0].transcript;
                    document.getElementById('userInput').value = transcript;
                    sendMessage();
                };

                recognition.onerror = (event) => {
                    console.error('Speech recognition error:', event.error);
                    showStatus('error', 'á˜á¶á“á”á‰áŸ’á á¶! Error: ' + event.error);
                    resetVoiceButtons();
                };

                recognition.onend = () => {
                    resetVoiceButtons();
                };
            } else {
                console.log('Speech recognition not supported');
            }
        }

        // á…á¶á”áŸ‹á•áŸ’áá¾á˜áŸáŸ’áá¶á”áŸ‹
        function startListening() {
            if (recognition) {
                try {
                    recognition.start();
                    stats.voice++;
                    updateStats();
                } catch (e) {
                    console.error('Error starting recognition:', e);
                }
            } else {
                alert('Speech recognition is not supported in your browser. Please use Chrome or Edge.');
            }
        }

        // á”á‰áŸ’áˆá”áŸ‹áŸáŸ’áá¶á”áŸ‹
        function stopListening() {
            if (recognition && isListening) {
                recognition.stop();
            }
        }

        // Reset voice buttons
        function resetVoiceButtons() {
            isListening = false;
            document.getElementById('btnListen').style.display = 'inline-block';
            document.getElementById('btnStop').style.display = 'none';
            hideStatus();
        }

        // Text-to-Speech
        function speak(text) {
            if (synthesis) {
                // Cancel any ongoing speech
                synthesis.cancel();

                const utterance = new SpeechSynthesisUtterance(text);
                utterance.lang = 'en-US';
                utterance.rate = 0.9;
                utterance.pitch = 1;

                utterance.onstart = () => {
                    showStatus('speaking', 'á€áŸ†á–á»á„á“á·á™á¶á™... Speaking...');
                };

                utterance.onend = () => {
                    hideStatus();
                };

                utterance.onerror = (event) => {
                    console.error('Speech synthesis error:', event);
                    hideStatus();
                };

                synthesis.speak(utterance);
            }
        }

        // á”á‰áŸ’á‡á¼á“áŸá¶áš
        async function sendMessage() {
            const input = document.getElementById('userInput');
            const message = input.value.trim();

            if (!message) return;

            // á”á„áŸ’á á¶á‰áŸá¶ášášá”áŸáŸ‹á¢áŸ’á“á€á”áŸ’ášá¾á”áŸ’ášá¶áŸáŸ‹
            addMessage(message, 'user');
            input.value = '';

            // á”á„áŸ’á á¶á‰áŸáŸ’áá¶á“á—á¶á– processing
            showStatus('processing', 'á€áŸ†á–á»á„áŠáŸ†áá¾ášá€á¶áš... Processing...');

            // á áŸ… Claude API
            try {
                const response = await fetch('https://api.anthropic.com/v1/messages', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        model: 'claude-sonnet-4-20250514',
                        max_tokens: 1500,
                        messages: [{
                            role: 'user',
                            content: `You are an expert English teacher helping students learn English. The student may speak in Khmer or English. Always respond in clear, simple English that's appropriate for language learners. Be encouraging and helpful.

If they ask you to create a story or content about a topic, write an interesting short passage (2-3 paragraphs) in English about that topic, using clear language and interesting vocabulary.

Student's message: ${message}`
                        }]
                    })
                });

                const data = await response.json();
                const aiResponse = data.content[0].text;

                hideStatus();
                addMessage(aiResponse, 'ai');
                speak(aiResponse);

                stats.messages++;
                updateStats();

            } catch (error) {
                console.error('Error:', error);
                hideStatus();
                addMessage('Sorry, I encountered an error. Please try again. áŸá¼á˜á¢á—áŸá™á‘áŸ„áŸ á˜á¶á“á”á‰áŸ’á á¶á”á…áŸ’á…áŸá€á‘áŸáŸáŸ”', 'ai');
            }
        }

        // á”á“áŸ’ááŸ‚á˜áŸá¶ášá‘áŸ… chat
        function addMessage(text, type) {
            const messagesDiv = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${type}`;

            const header = document.createElement('div');
            header.className = 'message-header';
            header.textContent = type === 'user' ? 'ğŸ‘¤ á¢áŸ’á“á€ (You)' : 'ğŸ¤– AI Teacher';

            const content = document.createElement('div');
            content.className = 'message-content';
            content.textContent = text;

            messageDiv.appendChild(header);
            messageDiv.appendChild(content);
            messagesDiv.appendChild(messageDiv);

            // Scroll to bottom
            messagesDiv.scrollTop = messagesDiv.scrollHeight;
        }

        // á”á„áŸ’á€á¾áášá¿á„áá¶á˜á”áŸ’ášá’á¶á“á”á‘
        async function generateStory(topic) {
            showStatus('processing', 'á€áŸ†á–á»á„á”á„áŸ’á€á¾áá¢ááŸ’áá”á‘... Creating story...');

            const prompt = `Create an interesting short story or passage (2-3 paragraphs) in English about "${topic}". Use clear, engaging language that's appropriate for English learners. Include some descriptive vocabulary but keep sentences relatively simple.`;

            try {
                const response = await fetch('https://api.anthropic.com/v1/messages', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        model: 'claude-sonnet-4-20250514',
                        max_tokens: 1500,
                        messages: [{
                            role: 'user',
                            content: prompt
                        }]
                    })
                });

                const data = await response.json();
                const story = data.content[0].text;

                hideStatus();
                addMessage(`ğŸ“š á¢ááŸ’áá”á‘á¢áŸ†á–á¸ "${topic}":`, 'user');
                addMessage(story, 'ai');
                speak(story);

                stats.stories++;
                updateStats();

            } catch (error) {
                console.error('Error:', error);
                hideStatus();
                addMessage('Sorry, I couldn\'t generate the story. Please try again.', 'ai');
            }
        }

        // á”á„áŸ’á€á¾áášá¿á„á•áŸ’á‘á¶á›áŸ‹ááŸ’á›á½á“
        function generateCustomStory() {
            const topic = document.getElementById('customTopic').value.trim();
            if (topic) {
                generateStory(topic);
                document.getElementById('customTopic').value = '';
            }
        }

        // á”áŸ’áá¼ášá—á¶áŸá¶
        function switchLanguage(lang) {
            currentLanguage = lang;
            document.getElementById('btnKm').classList.toggle('active', lang === 'km');
            document.getElementById('btnEn').classList.toggle('active', lang === 'en');
        }

        // á”á„áŸ’á á¶á‰áŸáŸ’áá¶á“á—á¶á–
        function showStatus(type, message) {
            const status = document.getElementById('statusIndicator');
            status.className = `status-indicator ${type}`;
            status.textContent = message;
            status.style.display = 'block';
        }

        // á›á¶á€áŸ‹áŸáŸ’áá¶á“á—á¶á–
        function hideStatus() {
            document.getElementById('statusIndicator').style.display = 'none';
        }

        // á’áŸ’áœá¾á”á…áŸ’á…á»á”áŸ’á”á“áŸ’á“á—á¶á–áŸáŸ’áá·áá·
        function updateStats() {
            document.getElementById('messageCount').textContent = stats.messages;
            document.getElementById('storyCount').textContent = stats.stories;
            document.getElementById('voiceCount').textContent = stats.voice;

            // ášá€áŸ’áŸá¶á‘á»á€á€áŸ’á“á»á„ localStorage
            localStorage.setItem('englishLearningStats', JSON.stringify(stats));
        }

        // á•áŸ’á‘á»á€áŸáŸ’áá·áá·
        function loadStats() {
            const saved = localStorage.getItem('englishLearningStats');
            if (saved) {
                stats = JSON.parse(saved);
                updateStats();
            }
        }

        // Handle Enter key
        function handleKeyPress(event) {
            if (event.key === 'Enter') {
                sendMessage();
            }
        }

        // á…á¶á”áŸ‹á•áŸ’áá¾á˜á–áŸá› load
        window.onload = () => {
            initSpeechRecognition();
            loadStats();
            console.log('ğŸ“ AI English Learning Assistant ready!');
        };
    </script>
</body>
</html>